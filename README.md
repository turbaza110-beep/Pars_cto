# Love Parser Monorepo

This repository is now organized as a lightweight monorepo that separates the Telegram-facing frontend from the Fastify backend. The structure keeps both apps isolated while still allowing shared tooling from the workspace root.

```
love-parser-front/
├── backend/              # Fastify + Queue workers + integrations
│   ├── src/
│   │   ├── middleware
│   │   ├── models
│   │   ├── routes
│   │   ├── services
│   │   ├── utils
│   │   └── index.ts
│   ├── package.json
│   ├── tsconfig.json
│   ├── .env.example
│   └── docker-compose.yml
├── frontend/             # Vite + React 18 implementation
│   ├── public/
│   ├── src/
│   ├── package.json
│   ├── tsconfig*.json
│   ├── vite.config.ts
│   └── .env.example
├── package.json          # Workspace scripts & shared tooling
└── pnpm-workspace.yaml   # Declares backend + frontend packages
```

## Requirements

- Node.js 20+
- [pnpm](https://pnpm.io/) (enable via `corepack enable pnpm`)
- Docker (optional, for running PostgreSQL/Redis locally)

## Installing dependencies

```bash
corepack enable pnpm
pnpm install
```

This installs dependencies for both `@love-parser/frontend` and `@love-parser/backend` thanks to the workspace configuration.

## Environment configuration

- **Frontend**: copy `frontend/.env.example` to `frontend/.env` and adjust values (defaults to `VITE_API_URL=http://localhost:3000`).
- **Backend**: copy `backend/.env.example` to `backend/.env` and customize Postgres/Redis/JWT/Telegram credentials. The server listens on port `3000` by default.

## Running locally

From the repository root you can use the workspace scripts:

```bash
pnpm dev:frontend   # start Vite dev server (port 8080 by default)
pnpm dev:backend    # start Fastify backend with hot reload (port 3000)
pnpm dev            # run both concurrently
```

Additional scripts:

- `pnpm build:frontend` – build the Vite application
- `pnpm lint` – run the frontend ESLint config
- `pnpm test:backend` – execute backend Vitest suites (placeholder)

## Docker Compose (backend)

The backend ships with a compose file that provisions PostgreSQL 15, Redis 7 and a dev-ready Node container:

```bash
cd backend
cp .env.example .env # edit as needed
docker compose up
```

The compose stack exposes:
- PostgreSQL on `localhost:5432`
- Redis on `localhost:6379`
- Fastify API on `localhost:3000`

## Notes

- Frontend aliases (`@/*`) continue to work after moving the source into `frontend/src`.
- Backend utilities (`@utils/*`, `@services/*`, etc.) are configured through `backend/tsconfig.json`.
- The README you are reading now replaces the previous Lovable autogenerated instructions.
